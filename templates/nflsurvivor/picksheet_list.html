{% extends 'nflsurvivor/pool_home_core.html' %}
{% load oscars_tags %}
{% block head %}
{{ block.super }}
    <script type="text/javascript">
        document.getElementById("all_picks").style.textDecoration="underline";
    </script>
    <script>
        $(function(){
            $("#all_picksheets").css("border-bottom","5px solid black");
            $(".your-picksheets-single").hide();
            $(".all-picksheets-single").show();

            $("#all_picksheets").click(function(){
                $(this).css("border-bottom","5px solid black");
                $("#your_picksheets").css("border-bottom","none");
                $(".your-picksheets-single").hide();
                $(".all-picksheets-single").show();
            });
            $("#your_picksheets").click(function(){
                $(this).css("border-bottom","5px solid black");
                $("#all_picksheets").css("border-bottom","none");
                $(".your-picksheets-single").show();
                $(".all-picksheets-single").hide();
            });
        });
    </script>
{% endblock %}
{% block body %}
        <title>Pick Sheets - {{ pool.name }} | Office Pool Hub</title>
        <h2 id="all_picksheets" style="display:inline;cursor:pointer;font-family:Verdana, Geneva, sans-serif;"><b>All Pick sheets</b></h2>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
        <h2 id="your_picksheets" style="display:inline;cursor:pointer;font-family:Verdana, Geneva, sans-serif;"><b>Your Pick sheets</b></h2>
        <br><div style="margin-top:15px;width:70%;"></div>
        {% if allow_new_picksheets %}
            <form action="{% url 'nflsurvivor_create_picksheet' pool.id 1 %}" method="GET">{% csrf_token %}
                <input type="submit" value="Fill Out a Pick Sheet" /> - You have until {{ pool.entry_deadline }} to submit or make changes to your picks.
            </form>
        {% else %}
            No new pick sheets may be created.<br>Either the Entry Deadline has past or you have created the max amount of pick sheets one member can have.
        {% endif %}
        <table class="span-15">
            <tr class="header">
                <th style="border-bottom:1px solid black;"><b>Member</b></th>
                <th style="border-bottom:1px solid black;"><b>Pick sheet</b></th>
                <th style="border-bottom:1px solid black;"><b>Pick This Week</b></th>
                <th></th>
            </tr>
        {% if picksheets %}
            <div id="all-picksheets-list">
            {% for picksheet in picksheets %}
                <tr class="all-picksheets-single">
                    <td class="span-4">{{ picksheet.member }}</td>
                    <td class="span-4">
                        {% if pool.allow_new_picksheets or pool.selection_process == 'weekly' and user != picksheet.member %}
                            {{ picksheet.name }}
                        {% elif pool.selection_process == 'weekly' and user == picksheet.member %}
                            <a href="{{ picksheet.get_absolute_url }}">{{ picksheet.name }}</a>
                        {% else %}
                            <a href="{{ picksheet.get_absolute_url }}">{{ picksheet.name }}</a>
                        {% endif %}
                    </td>
                    <td>
                        {% get_attr picksheet pool.season.get_current_week as pick%}
                        {% if pick == None %}
                            Hidden
                        {% elif pick == "" %}
                            No Pick
                        {% else %}
                            {{ pick }}
                        {% endif %}
                    </td>
                    {% if user == pool.administrator or user == picksheet.member %}
                        <td><a href="{% url 'nflsurvivor_remove_picksheet' pool.id picksheet.id %}" style="color:red;">[delete]</a></td>
                    {% endif %}
                </tr>
            {% endfor %}
            </div>
            <div id="your-picksheets-list">
                {% if your_picksheets %}
                    {% for picksheet in your_picksheets %}
                        <tr class="your-picksheets-single">
                            <td class="span-4">{{ picksheet.member }}</td>
                            <td class="span-4"><a href="{{ picksheet.get_absolute_url }}">{{ picksheet.name }}</a></td>
                            <td>
                                {% get_attr picksheet pool.season.get_current_week as pick%}
                                {% if pick == None %}
                                    Hidden
                                {% elif pick == "" %}
                                    No Pick
                                {% else %}
                                    {{ pick }}
                                {% endif %}
                            </td>
                            {% if user == picksheet.member %}
                                <td><a href="{% url 'nflsurvivor_remove_picksheet' pool.id picksheet.id %}" style="color:red;">[delete]</a></td>
                            {% endif %}
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr class="your-picksheets-single">
                        <td>You haven't created any picksheets yet.</td>
                    </tr>
                {% endif %}
            </div>
            </table>
        {% else %}
            <tr>
               <td colspan=3>No picks have been submitted yet</td>
            </tr>
            </table>
        {% endif %}
{% endblock %}