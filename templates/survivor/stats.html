{% extends 'survivor/pool_home_core.html' %}
{% load static %}
{% load oscars_tags %}
{% block head %}
{{ block.super }}
    <script src="{{ STATIC_URL }}js/highcharts.js" type="text/javascript"></script>
    <script>
        function castawayData(){
                var id = $(this).val()
                $.getJSON("{% url 'castaway_info' %}",{id:id},function(json_info){
                    if(json_info){
                        $.each(json_info, function(key, val){
                            if(key == "image_src"){
                                $("#castaway_image_src").attr("src", val)
                            }
                            else{
                                $("#castaway_" + key).text(val)
                            };
                        });
                    }
                    else{
                    };
                });
            }
        $(document).ready(function(){
            $("#id_castaways").change(castawayData);
            $("#id_castaways").bind("castawayUpdate",castawayData);
            $("#id_castaways").trigger("castawayUpdate");
        });
    </script>

{% endblock %}
{% block body %}
    <title>Stats - {{ pool.name }} | Office Pool Hub</title>
    <h2 style="font-family:Verdana, Geneva, sans-serif"><b>Survivor Stats</b></h2><hr>
        {% if cast %}
        <div style="float:left;margin-right:40px;font-size:15px;">
            {{ form.castaways }}<br>
            <img id="castaway_image_src" style="width:160px;height:200px;"><br>
            <b>Name:</b>  <font id="castaway_first_name"></font><br>
            <b>Season:</b>  <font id="castaway_season"></font><br><br>
        </div>
        <div style="float:left;">
            <h3 style="background:#27282C;color:#D3D3D3;padding:5px;text-align:center;"><b>Event Occurrences for Castaway</b></h3>
            <table class="span-9" style="font-size:15px;">
                <tr>
                    <td><b>First Castaway Voted Out:</b></td>
                    <td id="castaway_first_out"></td>
                </tr>
                <tr>
                    <td><b>Their Tribe Won Immunity:</b></td>
                    <td id="castaway_tribe_immunity"></td>
                </tr>
                <tr>
                    <td><b>Their Tribe Won Reward:</b></td>
                    <td id="castaway_tribe_reward"></td>
                </tr>
                <tr>
                    <td><b>Made the Merge:</b></td>
                    <td id="castaway_making_merge"></td>
                </tr>
                <tr>
                    <td><b>Found Hidden Immunity:</b></td>
                    <td id="castaway_finding_immunity"></td>
                </tr>
                <tr>
                    <td><b>Voted With The Majority:</b></td>
                    <td id="castaway_going_with_vote"></td>
                </tr>
                <tr>
                    <td><b>Won an Individual Immunity:</b></td>
                    <td id="castaway_individual_immunity"></td>
                </tr>
                <tr>
                    <td><b>Won an Individual Reward:</b></td>
                    <td id="castaway_individual_reward"></td>
                </tr>
                <tr>
                    <td><b>Successfully Used Hidden Immunity Idol:</b></td>
                    <td id="castaway_successful_idol_use"></td>
                </tr>
                <tr>
                    <td><b>Won at Redemption Island:</b></td>
                    <td id="castaway_ri_victory"></td>
                </tr>
                <tr>
                    <td><b>Returned from Redemption Island:</b></td>
                    <td id="castaway_returned_from_ri"></td>
                </tr>
                <tr>
                    <td><b>Number of Votes in the Final Tribal Counsel:</b></td>
                    <td id="castaway_ftc_votes"></td>
                </tr>
            </table>
        </div>
        <div>
            <center>
                <h1><b>Total Points</b></h1>
                <font id="castaway_total_points" style="font-size:70px;"></font>
                <h1><b>Pick Percentage</b></h1>
                <font id="castaway_pick_percentage" style="font-size:70px;"></font>%
            </center>
        </div>
        {% else %}
            Come back to this page when the season starts to see stats for each castaway.
        {% endif %}


{% endblock %}