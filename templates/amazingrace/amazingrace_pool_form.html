{% extends "panel_core.html" %}
{% block menu %}
    {{ block.super }}
    {% if pool %}
    <div class="container">
        <div class="submenu">
            <ul>
                <li><a href="{{ pool.get_absolute_url }}">Pool Home</a></li>
                <li id="ballots"><a href="{% url 'amazingrace_member_picksheets' pool.id %}">Member Picks</a></li>
                <li><a href="{% url 'amazingrace_standings' pool.id %}">Standings</a></li>
                <li><a href="{% url 'amazingrace_members' pool.id %}">Members</a></li>
                <li><a href="{% url 'amazingrace_stats' pool.id %}">Stats</a></li>
                {% if user == pool.administrator %}
                <li><a style="color:orange;" href="{% url 'amazingrace_pool' pool.id %}">Settings</a></li>
                {% endif %}
            </ul>
        </div>
    </div>
    {% endif %}
{% endblock %}
{% block body %}
        {% if pool %}
            <h2 style="font-family:Verdana, Geneva, sans-serif;"><b>{{ pool.name }} Settings</b></h2>
            <h4>You will not be able to edit the pool settings once the season has started</h4>
        {% else %}
            <h2>Create an Amazing Race pool</h2>
        {% endif %}
        {% if pool and pool.is_past_due %}
        <table class="span-18">
        <tr>
            <td class="span-3">{{ form.name.label_tag }}</td>
            <td class="span-6">{{ form.name.value }}</td>
            <td>{{ form.name.errors }}</td>
        </tr>
        <tr>
            <td>{{ form.password.label_tag }}</td>
            <td>{{ form.password.value }}</td>
            <td>{{ form.password.help_text }}</td>
            <td>{{ form.password.errors }}</td>
        </tr>
        <tr>
            <td>{{ form.entry_deadline.label_tag }}</td>
            <td>{{ form.entry_deadline.value }}<br>
                All time is in EST</td>
            <td>{{ form.entry_deadline.help_text }} Season Premiere airs on {{ season.date }}</td>
            <td>{{ form.entry_deadline.errors }}</td>
        </tr>
        <tr>
            <td>{{ form.max_submissions.label_tag }}</td>
            <td>{{ form.max_submissions.value }}</td>
        </tr>
       </table>
        <div class="span-18">
        <h3>Points Distribution</h3>
            <h4 class="span-12">Each member of the pool will choose 3 teams before the start of the season.
        No two members can choose the same 3 teams.  As the season goes on, each member
        will get points depending on what their chosen teams do.  Choose what
        you want to give points for by checking the check marks below.</h4>
        <hr width=0>
        <table style="margin-top:-10px;margin-bottom:5px;">
            <tr>
                <td class="span-7"><u>Condition</u></td>
                <td><u>Points</u></td>
            </tr>
            {% if pool.completing_leg %}
            <tr>
                <td>{{ form.completing_leg.label_tag }}</td>
                <td>1 pt</td>
                {% endif %}
            </tr>
            {% if pool.first_in_detour %}
            <tr>
                <td>{{ form.first_in_detour.label_tag }}</td>
                <td>1 pt</td>
            </tr>
            {% endif %}
            {% if pool.used_obstacle %}
            <tr>
                <td>{{ form.used_obstacle.label_tag }}</td>
                <td>1 pt</td>
            </tr>
            {% endif %}
            {% if pool.first_place %}
            <tr>
                <td>{{ form.first_place.label_tag }}</td>
                <td>1 pt</td>
            </tr>
            {% endif %}
            {% if pool.first_team_out %}
            <tr>
                <td>{{ form.first_team_out.label_tag }}</td>
                <td>1 pt</td>
            </tr>
            {% endif %}
        <table>
            </div>
{% else %}
<form method="POST">{% csrf_token %}
    <table>
        <tr>
            <td class="span-3">{{ form.name.label_tag }}</td>
            <td class="span-6">{{ form.name }}</td>
            <td>{{ form.name.errors }}</td>
        </tr>
        <tr>
            <td>{{ form.password.label_tag }}</td>
            <td>{{ form.password }}</td>
            <td>{{ form.password.help_text }}</td>
            <td>{{ form.password.errors }}</td>
        </tr>
        <tr>
            <td>{{ form.password_confirm.label_tag }}</td>
            <td>{{ form.password_confirm }}</td>
        </tr>
        <tr>
            <td>{{ form.entry_deadline.label_tag }}</td>
            <td>{{ form.entry_deadline }}<br>
                All time is in EST</td>
            <td>{{ form.entry_deadline.help_text }}<br>The season starts on {{ season.start_date }}</td>
            <td>{{ form.entry_deadline.errors }}</td>
        </tr>
        <tr>
            <td>{{ form.max_submissions.label_tag }}</td>
            <td>{{ form.max_submissions }}</td>
            <td>{{ form.max_submissions.help_text }}</td>
            <td>{{ form.max_submissions.errors }}</td>
        </tr>
       </table>
        <h3>Set the Points</h3>
        <h4 class="span-12">Each member of the pool will choose 3 teams before the start of the season.
        No two members can choose the same 3 teams.  As the season goes on, each member
        will get points depending on what their chosen teams do.  Choose want
        you want to give points for by checking the check marks below.</h4>
        <hr width=0>
        <table style="margin-top:-10px;margin-bottom:5px;">
            <tr>
                <td class="span-2"><u>Include in pool</u></td>
                <td class="span-7"><u>Condition</u></td>
                <td><u>Points</u></td>
            </tr>
            <tr>
                <td>{{ form.completing_leg }}</td>
                <td>{{ form.completing_leg.label_tag }}</td>
                <td>1 pt</td>
            </tr>
            <tr>
                <td>{{ form.first_in_detour }}</td>
                <td>{{ form.first_in_detour.label_tag }}</td>
                <td>1 pt</td>
            </tr>
            <tr>
                <td>{{ form.used_obstacle }}</td>
                <td>{{ form.used_obstacle.label_tag }}</td>
                <td>1 pt</td>
            </tr>
            <tr>
                <td>{{ form.first_place }}</td>
                <td>{{ form.first_place.label_tag }}</td>
                <td>1 pt</td>
            </tr>
            <tr>
                <td>{{ form.first_team_out }}</td>
                <td>{{ form.first_team_out.label_tag }}</td>
                <td>1 pt</td>
            </tr>
        <table>
        <div>
        <input class="submit" type="submit" name="submit" value="{% if pool %}Save{% else %}Create Pool{% endif %}" />
        {% if form.instance.id %}
        <input class="submit delete" type="submit" name="delete" id="delete" value="Delete Pool" />
        {% endif %}
    </div>
</form>
{% endif %}
{% endblock %}