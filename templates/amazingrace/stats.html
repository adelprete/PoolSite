{% extends 'amazingrace/pool_home_core.html' %}
{% load static %}
{% load oscars_tags %}
{% block head %}
{{ block.super }}
    <script src="{{ STATIC_URL }}js/highcharts.js" type="text/javascript"></script>
    <script>
        function teamData(){
                var id = $(this).val()
                $.getJSON("{% url 'team_info' %}",{id:id},function(json_info){
                    if(json_info){
                        $.each(json_info, function(key, val){
                            if(key == "image_src"){
                                $("#team_image_src").attr("src", val)
                            }
                            else{
                                $("#team_" + key).text(val)
                            };
                        });
                    }
                    else{
                    };
                });
            }
        $(document).ready(function(){
            $("#id_teams").change(teamData);
            $("#id_teams").bind("teamUpdate",teamData);
            $("#id_teams").trigger("teamUpdate");
        });
    </script>

{% endblock %}
{% block body %}
    <title>Stats - {{ pool.name }} | Office Pool Hub</title>
    <h2 style="font-family:Verdana, Geneva, sans-serif"><b>Amazing Race Stats</b></h2><hr>
        {% if cast %}
        <div style="float:left;margin-right:40px;font-size:15px;">
            {{ form.teams }}<br>
            <img id="team_image_src" style="width:160px;height:200px;"><br>
            <b>Name:</b>  <font id="team_first_name"></font><br>
            <b>Season:</b>  <font id="team_season"></font><br><br>
        </div>
        <div style="float:left;">
            <h3 style="background:#27282C;color:#D3D3D3;padding:5px;text-align:center;"><b>Event Occurrences for Team</b></h3>
            <table class="span-9" style="font-size:15px;">
                <tr>
                    <td><b>First Team Eliminated:</b></td>
                    <td id="team_first_team_out"></td>
                </tr>
                <tr>
                    <td><b>Team completed a leg:</b></td>
                    <td id="team_completing_leg"></td>
                </tr>
                <tr>
                    <td><b>First to complete Detour/Roadblock:</b></td>
                    <td id="team_first_in_detour"></td>
                </tr>
                <tr>
                    <td><b>Used the UTurn on a team:</b></td>
                    <td id="team_used_obstacle"></td>
                </tr>
                <tr>
                    <td><b>1st place after a leg:</b></td>
                    <td id="team_first_place"></td>
                </tr>
            </table>
        </div>
        <div>
            <center>
                <h1><b>Total Points</b></h1>
                <font id="team_total_points" style="font-size:70px;"></font>
                <h1><b>Pick Percentage</b></h1>
                <font id="team_pick_percentage" style="font-size:70px;"></font>%
            </center>
        </div>
        {% else %}
            Come back to this page when the season starts to see stats for each team.
        {% endif %}

{% endblock %}